import os
import cv2
import numpy as np

def calculate_contrast(image):
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    std_dev = np.std(gray)
    return std_dev

def process_images(input_folder, output_folder, contrast_threshold=67):
    # Ensure the output folder exists
    if not os.path.exists(output_folder):
        os.makedirs(output_folder)

    # Loop through all files in the input folder
    for filename in os.listdir(input_folder):
        filepath = os.path.join(input_folder, filename)

        # Check if the file is an image (you might want to add more checks here)
        if os.path.isfile(filepath) and any(filepath.lower().endswith(ext) for ext in ['.jpg', '.jpeg', '.png']):
            # Read the image
            image = cv2.imread(filepath)

            if image is not None:
                # Calculate the contrast level
                contrast_level = calculate_contrast(image)

                # Check if the contrast level is above the threshold
                if contrast_level > contrast_threshold:
                    # Save the image to the output folder
                    output_filepath = os.path.join(output_folder, filename)
                    cv2.imwrite(output_filepath, image)
                    print(f"Saved {output_filepath}, Contrast Level: {contrast_level}")

def main():
    input_folder = 'C:/Users/DCL/Desktop/S3'
    output_folder = 'C:/Users/DCL/Desktop/S4'

    process_images(input_folder, output_folder)

if __name__ == "__main__":
    main()
